# nosql2h21-jobs
# БД вакансий
Веб-инструмент для CRUD вакансий, а также продвинутой аналитики (включая графовое представление).
## Hello world
[Демо](https://drive.google.com/file/d/1nrT6IbR89ufyuPLxBCqLVm9JMyh5QrrJ/view?usp=sharing)  
Из корня проекта `./neo4j_prj` выполнить  
`$ docker-compose up neo4j`  
Подождать запуска БД, далее  
`$ docker-compose up --build hello_world`


## Модель данных
### Список сущностей

В терминологии neo4j данные сущности представляют из себя вершины, а их названия - метки(lable) 
 - **Area** - зона, в которой располагается вакансия.
   
```js
{
  "id": "integer",
  "name": "String"
}
```
 - **Country** - подмножество Area: зоны, являющиеся странами  
   Зоны и страны образуют древовидный граф
 - **Currency** - валюта
```js
{
  "name": "String"
}
```
   Например: RUB, EUR
 - **Employer** - работодатель, указывается для всех вакансий, кроме анонимных
```js
{
  "id": "integer",
  "name": "String"
}
```
 - **Schedule** - график работы
```js
{
  "id": "String",
  "name": "String"
}
```
Гибкий, полный, и т.д.
 - **Vacancy_type** - тип вакансии
```js
{
  "id": "String",
  "name": "String"
}
```
Открытая, закрытая, анонимная
 - **Vacancy** - нода вакансии
```js
{
  "id": "integer", // Название
  "name": "String", // Название
  "has_test": "boolean", // Есть ли тестовое
  "salary_from": "integer", // Нижняя граница зарплаты
  "salary_to": "integer", // Верхняя граница зарплаты
  "published_at": "String(DateTime)", // Время публикации вакансии
  "created_at": "String(DateTime)", // Время создания вакансии
  "requirement": "String", // Требования
  "responsibility": "String" // Ответственность
}
```
### Список связей (дуг/рёбер)
Метка | Из | В 
--- | --- | --- 
**LOCATED_IN** | Vacancy | Area/Country
**SALARY_IN** | Vacancy | Currency
**HAS_EMPLOYER** | Vacancy | Employer
**HAS_SCHEDULE** | Vacancy | Schedule
**HAS_TYPE** | Vacancy | Vacancy_type
**SUBAREA_OF** | Area | Area/Country

### Графическое представление
![Alt text](../img/graph_neo4j.png "Графовое представление данных")  
Здесь для примера представлены две вакансии - в Москве (Аналитик) и СПб (Финансист). У вакансии из СПБ не указан работодатель и график работы

### Оценка удельного объема информации, хранимой в модели (сколько потребуется памяти, чтобы сохранить объекты, как объем зависит от количества объектов)
Размеры различных типов данных представлены в [документации](https://neo4j.com/docs/2.1.5/graphdb-neo4j-properties.html "graphdb-neo4j-properties")
Размеры строки приняты за S и оценены по верхней границе в 255 байт (размер строк фиксированной длины по умолчанию во многих БД)
У всех объектов есть внутренний ID размером 8 байт, который имеет смысл учитывать в "чистом" объеме для характеристики ребер
 - Связи
   Связи(рёбра) характеризуются ID и двумя вршинами, а так же 
 - Area
Чистый объем:
4 байта + S = 259 байт
   


Area, Employer: 
Schedule, Vacancy_type: ~40 байт
Currency


### Избыточность модели
Чистый:  
Практический:  

### Направление роста модели при увеличении количества объектов каждой сущности.
Количество всех объектов зависит от числа вакансий, т.е. объект работодателя появляется в базе только если появляется вакансия с новым работодателем
 - Area, Country - Количество объектов этого типа не превосходит число вакансий и растет в зависимости от числа вакансий не быстрее чем линейно. 
   Так же общее количество регионов ограничено (~7000). 
При малом количестве данных рост можно оценить как линейный, а при больших - как констаный
 - Currency - Количество Валют не превосходит 10, потребление памяти можно оценить как константу
 - Employer - При увеличении количество вакансий растет линейно с большим коэффициентом, т.к. у работодателя может быть несколько вакансий.
Рост можно оценить как `O(n*(m*2))` , где n - число работодателей, m - число вакансий, коэфициент излишен, но он показывает затраты на объекты рёбет от вакансий к работодателям
 - Schedule - Количество разновидностей графиков работы константно
 - Vacancy_type - Количество разновидностей типов вакансий константно
 - Vacancy - При росте числа вакансий




###  Запросы к модели, с помощью которых реализуются сценарии использования
 - Текст запросов
 - Количество запросов для совершения юзкейсов в зависимости от числа объектов в БД и прочих параметров
 - Количество задействованных коллекций (если есть)

## Аналог модели данных для SQL СУБД

## Сравнение моделей
